jQuery(document).ready(function(){GRACE_CHURCH_GLOBALS.theme_init_counter=0;grace_church_init_actions()});function grace_church_init_actions(){if(GRACE_CHURCH_GLOBALS.vc_edit_mode&&jQuery(".vc_empty-placeholder").length==0&&GRACE_CHURCH_GLOBALS.theme_init_counter++<30){setTimeout(grace_church_init_actions,200);return}grace_church_ready_actions();grace_church_resize_actions();grace_church_scroll_actions();jQuery(window).resize(function(){grace_church_resize_actions();grace_church_scroll_actions()});jQuery(window).scroll(function(){grace_church_scroll_actions()})}function grace_church_ready_actions(){if(window.grace_church_skin_ready_actions){grace_church_skin_ready_actions()}jQuery(".widget ul > li").each(function(){if(jQuery(this).find("ul").length>0){jQuery(this).addClass("has_children")}});jQuery(".widget_archive a").each(function(){var b=jQuery(this).html().split(" ");if(b.length>1){b[b.length-1]="<span>"+b[b.length-1]+"</span>";jQuery(this).html(b.join(" "))}});jQuery(".widget_calendar").on("click",".month_prev a, .month_next a",function(f){var d=jQuery(this).parents(".wp-calendar");var b=jQuery(this).data("month");var g=jQuery(this).data("year");var c=jQuery(this).data("type");jQuery.post(GRACE_CHURCH_GLOBALS.ajax_url,{action:"calendar_change_month",nonce:GRACE_CHURCH_GLOBALS.ajax_nonce,month:b,year:g,post_type:c}).done(function(e){var h=JSON.parse(e);if(h.error===""){d.parent().fadeOut(200,function(){jQuery(this).find(".wp-calendar").remove();jQuery(this).append(h.data).fadeIn(200)})}});f.preventDefault();return false});jQuery(".video_background").each(function(){var b=jQuery(this).data("youtube-code");if(b){jQuery(this).tubular({videoId:b})}});if(jQuery("ul#menu_side").length>0){jQuery("ul#menu_side").clone().removeAttr("id").removeClass("menu_side_nav").addClass("menu_side_responsive").insertAfter("ul#menu_side");grace_church_show_current_menu_item(jQuery(".menu_side_responsive"),jQuery(".sidebar_outer_menu_responsive_button"))}if(jQuery("ul#menu_main").length>0){var a=jQuery("ul#menu_main").clone().removeAttr("id").removeClass("menu_main_nav").addClass("menu_main_responsive");jQuery("ul#menu_main").parent().parent().append(a);grace_church_show_current_menu_item(jQuery(".menu_main_responsive"),jQuery(".top_panel_style_1 .menu_main_responsive_button, .top_panel_style_2 .menu_main_responsive_button"))}jQuery(".menu_main_responsive_button, .sidebar_outer_menu_responsive_button").click(function(b){if(jQuery(this).hasClass("menu_main_responsive_button")){jQuery(".menu_main_responsive").slideToggle()}else{jQuery(this).toggleClass("icon-down").toggleClass("icon-up");jQuery(".menu_side_responsive").slideToggle()}b.preventDefault();return false});jQuery(".sidebar_outer_widgets_button").click(function(b){jQuery(".sidebar_outer_widgets").slideToggle();b.preventDefault();return false});jQuery(".menu_main_responsive li a, .menu_side_responsive li a").click(function(c){var b=jQuery(this).parents(".menu_main_responsive").length>0;if((!b||jQuery("body").hasClass("responsive_menu"))&&jQuery(this).parent().hasClass("menu-item-has-children")){if(jQuery(this).siblings("ul:visible").length>0){jQuery(this).siblings("ul").slideUp().parent().removeClass("opened")}else{jQuery(this).siblings("ul").slideDown().parent().addClass("opened")}}if(jQuery(this).attr("href")=="#"||((!b||jQuery("body").hasClass("responsive_menu"))&&jQuery(this).parent().hasClass("menu-item-has-children"))){c.preventDefault();return false}});grace_church_init_sfmenu("ul#menu_main, ul#menu_user, ul#menu_side");if(GRACE_CHURCH_GLOBALS.menu_slider){jQuery("#menu_main").spasticNav({color:GRACE_CHURCH_GLOBALS.accent2_color})}if(GRACE_CHURCH_GLOBALS.toc_menu!="no"){grace_church_build_page_toc()}jQuery("#toc, ul#menu_main li, ul#menu_user li, ul#menu_side li, ul#menu_footer li").on("click","a",function(f){var b=jQuery(this).attr("href");if(b===undefined){return}var h=b.indexOf("#");if(h<0||b.length==1){return}if(jQuery(b.substr(h)).length>0){var g=window.location.href;var d=g.indexOf("#");if(d>0){g=g.substring(0,d)}var c=h==0;if(!c){c=g==b.substring(0,h)}if(c){grace_church_document_animate_to(b.substr(h));grace_church_document_set_location(h==0?g+b:b);f.preventDefault();return false}}});GRACE_CHURCH_GLOBALS.top_panel_height=0;GRACE_CHURCH_GLOBALS.side_panel_height=0;jQuery(".pager_cur").click(function(b){jQuery(".pager_slider").slideDown(300,function(){grace_church_init_shortcodes(jQuery(".pager_slider").eq(0))});b.preventDefault();return false});jQuery("#viewmore_link").click(function(b){if(!GRACE_CHURCH_GLOBALS.viewmore_busy&&!jQuery(this).hasClass("viewmore_empty")){jQuery(this).parent().addClass("loading");GRACE_CHURCH_GLOBALS.viewmore_busy=true;jQuery.post(GRACE_CHURCH_GLOBALS.ajax_url,{action:"view_more_posts",nonce:GRACE_CHURCH_GLOBALS.ajax_nonce,page:GRACE_CHURCH_GLOBALS.viewmore_page+1,data:GRACE_CHURCH_GLOBALS.viewmore_data,vars:GRACE_CHURCH_GLOBALS.viewmore_vars}).done(function(c){var e=JSON.parse(c);jQuery("#viewmore_link").parent().removeClass("loading");GRACE_CHURCH_GLOBALS.viewmore_busy=false;if(e.error===""){var d=jQuery(".content").eq(0);if(d.find(".isotope_wrap").length>0){d=d.find(".isotope_wrap").eq(0)}if(d.hasClass("isotope_wrap")){d.data("last-width",0).append(e.data);GRACE_CHURCH_GLOBALS.isotope_init_counter=0;grace_church_init_appended_isotope(d,e.filters)}else{jQuery("#viewmore").before(e.data)}GRACE_CHURCH_GLOBALS.viewmore_page++;if(e.no_more_data==1){jQuery("#viewmore_link").addClass("viewmore_empty").parent().hide()}grace_church_init_post_formats();grace_church_init_shortcodes(d);grace_church_scroll_actions()}})}b.preventDefault();return false});jQuery(".woocommerce .mode_buttons a,.woocommerce-page .mode_buttons a").click(function(b){var c=jQuery(this).hasClass("woocommerce_thumbs")?"thumbs":"list";jQuery.cookie("grace_church_shop_mode",c,{expires:365,path:"/"});jQuery(this).siblings("input").val(c).parents("form").get(0).submit();b.preventDefault();return false});jQuery("body").bind("added_to_cart",function(){var d=jQuery(".menu_user_cart .total .amount").text();if(d!=undefined){jQuery(".top_panel_cart_button .cart_summa").text(d)}var c=0;jQuery(".menu_user_cart .cart_list li").each(function(){var e=jQuery(this).find(".quantity").html().split(" ",2);if(!isNaN(e[0])){c+=Number(e[0])}});var b=jQuery(".top_panel_cart_button .cart_items").text().split(" ");b[0]=c;jQuery(".top_panel_cart_button .cart_items").text(b[0]+" "+b[1])});jQuery(".top_panel_middle .top_panel_cart_button").click(function(b){jQuery(this).siblings(".sidebar_cart").slideToggle();b.preventDefault();return false});jQuery(".popup_link").addClass("inited").click(function(c){var b=jQuery(jQuery(this).attr("href"));if(b.length===1){grace_church_hide_popup(jQuery(b.hasClass("popup_login")?".popup_registration":".popup_login"));grace_church_toggle_popup(b)}c.preventDefault();return false});jQuery(".popup_wrap .popup_close").click(function(c){var b=jQuery(this).parent();if(b.length===1){grace_church_hide_popup(b)}c.preventDefault();return false});jQuery(".popup_form.login_form").submit(function(c){var b=grace_church_login_validate(jQuery(this));if(!b){c.preventDefault()}return b});jQuery(".popup_form.registration_form").submit(function(c){var b=grace_church_registration_validate(jQuery(this));if(!b){c.preventDefault()}return b});jQuery("form#commentform").submit(function(c){var b=grace_church_comments_validate(jQuery(this));if(!b){c.preventDefault()}return b});jQuery(".bookmarks_add").click(function(g){var j=window.document.title.split("|")[0];var b=window.location.href;var f=jQuery.cookie("grace_church_bookmarks");var d=false;if(f){f=JSON.parse(f);for(var c=0;c<f.length;c++){if(f[c].url==b){d=true;break}}}else{f=new Array()}if(!d){var h=grace_church_message_dialog('<label for="bookmark_title">'+GRACE_CHURCH_GLOBALS.strings["bookmark_title"]+'</label><br><input type="text" id="bookmark_title" name="bookmark_title" value="'+j+'">',GRACE_CHURCH_GLOBALS.strings["bookmark_add"],null,function(i,e){if(i!=1){return}j=h.find("#bookmark_title").val();f.push({title:j,url:b});jQuery(".bookmarks_list").append('<li><a href="'+b+'" class="bookmarks_item">'+j+'<span class="bookmarks_delete icon-cancel" title="'+GRACE_CHURCH_GLOBALS.strings["bookmark_del"]+'"></span></a></li>');jQuery.cookie("grace_church_bookmarks",JSON.stringify(f),{expires:365,path:"/"});setTimeout(function(){grace_church_message_success(GRACE_CHURCH_GLOBALS.strings["bookmark_added"],GRACE_CHURCH_GLOBALS.strings["bookmark_add"])},GRACE_CHURCH_GLOBALS.message_timeout/4)})}else{grace_church_message_warning(GRACE_CHURCH_GLOBALS.strings["bookmark_exists"],GRACE_CHURCH_GLOBALS.strings["bookmark_add"])}g.preventDefault();return false});jQuery(".bookmarks_list").on("click",".bookmarks_delete",function(d){var b=jQuery(this).parent().index();var c=jQuery.cookie("grace_church_bookmarks");if(c){c=JSON.parse(c);c.splice(b,1);jQuery.cookie("grace_church_bookmarks",JSON.stringify(c),{expires:365,path:"/"})}jQuery(this).parent().remove();d.preventDefault();return false});jQuery(".scroll_to_top").click(function(b){jQuery("html,body").animate({scrollTop:0},"slow");b.preventDefault();return false});grace_church_show_system_message();grace_church_init_post_formats();grace_church_init_shortcodes(jQuery("body").eq(0));if(window.grace_church_init_hidden_elements){grace_church_init_hidden_elements(jQuery("body").eq(0))}}function grace_church_scroll_actions(){var b=jQuery(window).scrollTop();var d=jQuery(".scroll_to_top");var a=Math.max(0,jQuery("#wpadminbar").height());if(GRACE_CHURCH_GLOBALS.top_panel_height==0){GRACE_CHURCH_GLOBALS.top_panel_height=jQuery(".top_panel_wrap").height()}if(window.grace_church_skin_scroll_actions){grace_church_skin_scroll_actions()}if(b>GRACE_CHURCH_GLOBALS.top_panel_height){d.addClass("show")}else{d.removeClass("show")}if(!jQuery("body").hasClass("responsive_menu")&&GRACE_CHURCH_GLOBALS.menu_fixed){var c=0;if(jQuery(".top_panel_below .slider_wrap").length>0){c=jQuery(".top_panel_below .slider_wrap").height();if(c<10){c=jQuery(".slider_wrap").hasClass(".slider_fullscreen")?jQuery(window).height():GRACE_CHURCH_GLOBALS.slider_height}}if(b<=c+GRACE_CHURCH_GLOBALS.top_panel_height){if(jQuery("body").hasClass("top_panel_fixed")){jQuery("body").removeClass("top_panel_fixed")}}else{if(b>c+GRACE_CHURCH_GLOBALS.top_panel_height){if(!jQuery("body").hasClass("top_panel_fixed")){jQuery(".top_panel_fixed_wrap").height(GRACE_CHURCH_GLOBALS.top_panel_height);jQuery(".top_panel_wrap").css("marginTop","-150px").animate({marginTop:0},500);jQuery("body").addClass("top_panel_fixed")}}}}if(jQuery(".sidebar_outer").length>0){if(GRACE_CHURCH_GLOBALS.side_panel_height==0){GRACE_CHURCH_GLOBALS.side_panel_height=jQuery(".sidebar_outer_logo_wrap").outerHeight()+jQuery(".sidebar_outer_menu").outerHeight()+jQuery(".sidebar_outer_widgets").outerHeight()}if(b+jQuery(window).height()>GRACE_CHURCH_GLOBALS.side_panel_height+100){jQuery(".sidebar_outer").css("top",(b+jQuery(window).height()-GRACE_CHURCH_GLOBALS.side_panel_height-100)+"px")}else{jQuery(".sidebar_outer").css("top",0)}}jQuery("#toc .toc_item").each(function(){var l=jQuery(this).find("a").attr("href");var k=l.indexOf("#");if(k<0||l.length==1){return}var j=window.location.href;var g=j.indexOf("#");if(g>0){j=j.substring(0,g)}var f=k==0;if(!f){f=j==href.substring(0,k)}if(!f){return}var i=jQuery(l).offset().top;var e=jQuery(this).next().find("a").attr("href");var h=e?jQuery(e).offset().top:1000000;if(i<b+jQuery(window).height()*0.8&&b+GRACE_CHURCH_GLOBALS.top_panel_height<h){jQuery(this).addClass("current")}else{jQuery(this).removeClass("current")}});grace_church_infinite_scroll();grace_church_parallax_scroll();grace_church_animation_shortcodes()}function grace_church_infinite_scroll(){if(GRACE_CHURCH_GLOBALS.viewmore_busy){return}var b=jQuery("#viewmore.pagination_infinite");if(b.length>0){var a=b.find("#viewmore_link:not(.viewmore_empty)");if(a.length>0){if(jQuery(window).scrollTop()+jQuery(window).height()+100>=b.offset().top){a.eq(0).trigger("click")}}}}function grace_church_parallax_scroll(){jQuery(".sc_parallax").each(function(){var f=jQuery(window).height();var e=jQuery(window).scrollTop();var c=Math.max(jQuery(this).offset().top,f);if(c<=e+f){var b=Number(jQuery(this).data("parallax-speed"));var a=jQuery(this).data("parallax-x-pos");var d=Math.round((c-e-f)*b+(b<0?f*b:0));jQuery(this).find(".sc_parallax_content").css("backgroundPosition",a+" "+d+"px");jQuery(this).find("div.sc_video_bg").css("top",d+"px")}})}function grace_church_resize_actions(){if(window.grace_church_skin_resize_actions){grace_church_skin_resize_actions()}grace_church_responsive_menu();grace_church_video_dimensions();grace_church_resize_video_background();grace_church_resize_fullscreen_slider()}function grace_church_responsive_menu(){if(grace_church_is_responsive_need(GRACE_CHURCH_GLOBALS.menu_responsive)){if(!jQuery("body").hasClass("responsive_menu")){jQuery("body").removeClass("top_panel_fixed").addClass("responsive_menu");if(jQuery("body").hasClass("menu_relayout")){jQuery("body").removeClass("menu_relayout")}if(jQuery("ul.menu_main_nav").hasClass("inited")){jQuery("ul.menu_main_nav").removeClass("inited").superfish("destroy")}if(jQuery("ul.menu_side_nav").hasClass("inited")){jQuery("ul.menu_side_nav").removeClass("inited").superfish("destroy")}}}else{if(jQuery("body").hasClass("responsive_menu")){jQuery("body").removeClass("responsive_menu");jQuery(".menu_main_responsive").hide();jQuery(".menu_side_responsive").hide();grace_church_init_sfmenu("ul.menu_main_nav,ul.menu_side_nav");jQuery(".menu_main_nav_area").show()}if(grace_church_is_responsive_need(GRACE_CHURCH_GLOBALS.menu_relayout)){jQuery("body").addClass("menu_relayout")}else{if(jQuery("body").hasClass("menu_relayout")){jQuery("body").removeClass("menu_relayout")}}}if(!jQuery(".top_panel_wrap").hasClass("menu_show")){jQuery(".top_panel_wrap").addClass("menu_show")}if(jQuery(".sidebar_outer").length>0&&jQuery(".sidebar_outer").css("position")=="absolute"&&jQuery(".sidebar_outer_widgets:visible").length==0){jQuery(".sidebar_outer_widgets").show()}}function grace_church_is_responsive_need(b){var c=false;if(b>0){var a=window.innerWidth;if(a==undefined){a=jQuery(window).width()+(jQuery(window).height()<jQuery(document).height()||jQuery(window).scrollTop()>0?16:0)}c=b>a}return c}function grace_church_show_current_menu_item(b,a){b.find("a").each(function(){var c=jQuery(this);if(c.text()==""){return}if(c.attr("href")==window.location.href){a.text(c.text())}})}function grace_church_video_dimensions(){jQuery(".sc_video_frame").each(function(){var h=jQuery(this).eq(0);var c=h.parent();var e=(h.data("ratio")?h.data("ratio").split(":"):(h.find("[data-ratio]").length>0?h.find("[data-ratio]").data("ratio").split(":"):[16,9]));e=e.length!=2||e[0]==0||e[1]==0?16/9:e[0]/e[1];var b=h.data("width");var g=h.data("height");if(!b||!g){return}var f=(""+b).substr(-1)=="%";b=parseInt(b);g=parseInt(g);var a=Math.min(f||h.parents(".columns_wrap").length>0?10000:b,h.parents("div,article").width()),d=Math.round(f?a/e:a/b*g);if(parseInt(h.attr("data-last-width"))==a){return}if(f){h.height(d)}else{h.css({width:a+"px",height:d+"px"})}h.attr("data-last-width",a)});jQuery("video.sc_video,video.wp-video-shortcode").each(function(){var a=jQuery(this).eq(0);var g=(a.data("ratio")!=undefined?a.data("ratio").split(":"):[16,9]);g=g.length!=2||g[0]==0||g[1]==0?16/9:g[0]/g[1];var e=a.parents(".mejs-video");var b=a.parents(".sc_video_frame");var h=b.length>0?b.data("width"):a.data("width");var c=b.length>0?b.data("height"):a.data("height");if(!h||!c){h=a.attr("width");c=a.attr("height");if(!h||!c){return}a.data({width:h,height:c})}var f=(""+h).substr(-1)=="%";h=parseInt(h);c=parseInt(c);var i=Math.round(e.length>0?Math.min(f?10000:h,e.parents("div,article").width()):a.width()),d=Math.round(f?i/g:i/h*c);if(parseInt(a.attr("data-last-width"))==i){return}if(e.length>0&&mejs){grace_church_set_mejs_player_dimensions(a,i,d)}if(f){a.height(d)}else{a.attr({width:i,height:d}).css({width:i+"px",height:d+"px"})}a.attr("data-last-width",i)});jQuery("video.sc_video_bg").each(function(){var d=jQuery(this).eq(0);var k=(d.data("ratio")!=undefined?d.data("ratio").split(":"):[16,9]);k=k.length!=2||k[0]==0||k[1]==0?16/9:k[0]/k[1];var j=d.parents(".mejs-video");var b=j.length>0?j.parent():d.parent();var n=b.width();var g=b.height();var i=Math.ceil(g*k);var m=Math.ceil(n/k);if(d.parents(".sc_parallax").length>0){var a=jQuery(window).height();var e=Number(d.parents(".sc_parallax").data("parallax-speed"));var c=Math.ceil(Math.abs((a-g)*e));if(m<g+c){m=g+c;i=Math.ceil(m*k)}}if(m<g){m=g;i=Math.ceil(m*k)}if(i<n){i=n;m=Math.ceil(i/k)}var f=Math.round((i-n)/2);var o=Math.round((m-g)/2);if(parseInt(d.attr("data-last-width"))==i){return}if(j.length>0){grace_church_set_mejs_player_dimensions(d,i,m);j.css({top:-o+"px"})}else{d.css({top:-o+"px"})}d.attr({width:i,height:m,"data-last-width":i}).css({width:i+"px",height:m+"px"});if(d.css("opacity")==0){d.animate({opacity:1},3000)}});jQuery("iframe").each(function(){var e=jQuery(this).eq(0);var d=(e.data("ratio")!=undefined?e.data("ratio").split(":"):(e.find("[data-ratio]").length>0?e.find("[data-ratio]").data("ratio").split(":"):[16,9]));d=d.length!=2||d[0]==0||d[1]==0?16/9:d[0]/d[1];var b=e.attr("width");var g=e.attr("height");var h=e.parents(".sc_video_frame");if(h.length>0){b=h.data("width");g=h.data("height")}if(!b||!g){return}var f=(""+b).substr(-1)=="%";b=parseInt(b);g=parseInt(g);var a=h.length>0?h.width():e.width(),c=Math.round(f?a/d:a/b*g);if(parseInt(e.attr("data-last-width"))==a){return}e.css({width:a+"px",height:c+"px"})})}function grace_church_resize_video_background(){var c=jQuery(".video_bg");if(c.length<1){return}if(GRACE_CHURCH_GLOBALS.media_elements_enabled&&c.find(".mejs-video").length==0){setTimeout(grace_church_resize_video_background,100);return}var a=c.find("video");var f=(a.data("ratio")!=undefined?a.data("ratio").split(":"):[16,9]);f=f.length!=2||f[0]==0||f[1]==0?16/9:f[0]/f[1];var i=c.width();var d=c.height();var e=Math.ceil(d*f);var g=Math.ceil(i/f);if(g<d){g=d;e=Math.ceil(g*f)}if(e<i){e=i;g=Math.ceil(e/f)}var b=Math.round((e-i)/2);var j=Math.round((g-d)/2);if(c.find(".mejs-container").length>0){grace_church_set_mejs_player_dimensions(c.find("video"),e,g);c.find(".mejs-container").css({left:-b+"px",top:-j+"px"})}else{c.find("video").css({left:-b+"px",top:-j+"px"})}c.find("video").attr({width:e,height:g}).css({width:e+"px",height:g+"px"})}function grace_church_set_mejs_player_dimensions(d,a,c){if(mejs){for(var b in mejs.players){if(mejs.players[b].media.src==d.attr("src")){if(mejs.players[b].media.setVideoSize){mejs.players[b].media.setVideoSize(a,c)}mejs.players[b].setPlayerSize(a,c);mejs.players[b].setControlsSize()}}}}function grace_church_resize_fullscreen_slider(){var c=jQuery(".slider_wrap.slider_fullscreen");if(c.length<1){return}var b=c.find(".sc_slider_swiper");if(b.length<1){return}var a=jQuery(window).height()-jQuery("#wpadminbar").height()-(jQuery("body").hasClass("top_panel_above")&&!jQuery("body").hasClass(".top_panel_fixed")?jQuery(".top_panel_wrap").height():0);b.height(a)}function grace_church_init_sfmenu(a){jQuery(a).show().each(function(){if(grace_church_is_responsive_need()&&(jQuery(this).attr("id")=="menu_main"||jQuery(this).attr("id")=="menu_side")){return}jQuery(this).addClass("inited").superfish({delay:500,animation:{opacity:"show"},animationOut:{opacity:"hide"},speed:GRACE_CHURCH_GLOBALS.css_animation?500:(GRACE_CHURCH_GLOBALS.menu_slider?300:200),speedOut:GRACE_CHURCH_GLOBALS.css_animation?500:(GRACE_CHURCH_GLOBALS.menu_slider?300:200),autoArrows:false,dropShadows:false,onBeforeShow:function(c){if(jQuery(this).parents("ul").length>1){var b=jQuery(window).width();var e=jQuery(this).parents("ul").offset().left;var f=jQuery(this).parents("ul").outerWidth();var d=jQuery(this).outerWidth();if(e+f+d>b-20&&e-d>0){jQuery(this).addClass("submenu_left")}else{jQuery(this).removeClass("submenu_left")}}if(GRACE_CHURCH_GLOBALS.css_animation){jQuery(this).removeClass("animated fast "+GRACE_CHURCH_GLOBALS.menu_animation_out);jQuery(this).addClass("animated fast "+GRACE_CHURCH_GLOBALS.menu_animation_in)}},onBeforeHide:function(b){if(GRACE_CHURCH_GLOBALS.css_animation){jQuery(this).removeClass("animated fast "+GRACE_CHURCH_GLOBALS.menu_animation_in);jQuery(this).addClass("animated fast "+GRACE_CHURCH_GLOBALS.menu_animation_out)}}})})}function grace_church_build_page_toc(){var b="",a=0;jQuery('[id^="toc_"],.sc_anchor').each(function(c){var h=jQuery(this);var j=h.attr("id");var d=h.data("url");var e=h.data("icon");if(!e){e="icon-circle-dot"}var i=h.attr("title");var f=h.data("description");var g=h.data("separator");a++;b+='<div class="toc_item'+(g=="yes"?" toc_separator":"")+'">'+(f?'<div class="toc_description">'+f+"</div>":"")+'<a href="'+(d?d:"#"+j)+'" class="toc_icon'+(i?" with_title":"")+" "+e+'">'+(i?'<span class="toc_title">'+i+"</span>":"")+"</a></div>"});if(a>(GRACE_CHURCH_GLOBALS.toc_menu_home?1:0)+(GRACE_CHURCH_GLOBALS.toc_menu_top?1:0)){if(jQuery("#toc").length>0){jQuery("#toc .toc_inner").html(b)}else{jQuery("body").append('<div id="toc" class="toc_'+GRACE_CHURCH_GLOBALS.toc_menu+'"><div class="toc_inner">'+b+"</div></div>")}}}function grace_church_init_isotope(){var a=true;jQuery(".isotope_wrap:not(.inited)").each(function(){a=a&&grace_church_check_images_complete(jQuery(this))});if(!a&&GRACE_CHURCH_GLOBALS.isotope_init_counter++<30){setTimeout(grace_church_init_isotope,200);return}jQuery(".isotope_filters:not(.inited)").addClass("inited").on("click","a",function(c){jQuery(this).parents(".isotope_filters").find("a").removeClass("active");jQuery(this).addClass("active");var b=jQuery(this).data("filter");jQuery(this).parents(".isotope_filters").siblings(".isotope_wrap").eq(0).isotope({filter:b});if(b=="*"){jQuery("#viewmore_link").fadeIn()}else{jQuery("#viewmore_link").fadeOut()}c.preventDefault();return false});jQuery(".isotope_wrap:not(.inited)").each(function(){var b=jQuery(this);grace_church_init_shortcodes(b);if(b.parents(".sc_scroll").length>0){b.addClass("inited").find(".isotope_item").animate({opacity:1},200,function(){jQuery(this).addClass("isotope_item_show")});return}setTimeout(function(){b.addClass("inited").isotope({itemSelector:".isotope_item",animationOptions:{duration:750,easing:"linear",queue:false}});b.find(".isotope_item").animate({opacity:1},200,function(){jQuery(this).addClass("isotope_item_show")})},500)})}function grace_church_init_appended_isotope(c,d){if(c.parents(".sc_scroll_horizontal").length>0){return}if(!grace_church_check_images_complete(c)&&GRACE_CHURCH_GLOBALS.isotope_init_counter++<30){setTimeout(function(){grace_church_init_appended_isotope(c,d)},200);return}var e=c.siblings(".isotope_filter");for(var b in d){if(e.find('a[data-filter=".flt_'+b+'"]').length==0){e.append('<a href="#" class="isotope_filters_button" data-filter=".flt_'+b+'">'+d[b]+"</a>")}}grace_church_init_shortcodes(c);var a=c.find(".isotope_item:not(.isotope_item_show)");setTimeout(function(){c.isotope("appended",a);a.animate({opacity:1},200,function(){jQuery(this).addClass("isotope_item_show")})},500)}function grace_church_init_shortcodes(a){if(window.grace_church_sc_init){grace_church_sc_init(a)}}function grace_church_animation_shortcodes(){if(window.grace_church_sc_animation){grace_church_sc_animation()}}function grace_church_init_post_formats(){grace_church_init_media_elements(jQuery("body"));if(jQuery(".isotope_wrap:not(.inited)").length>0){GRACE_CHURCH_GLOBALS.isotope_init_counter=0;grace_church_init_isotope()}if(jQuery(".isotope_wrap .isotope_item_content.square.effect_dir:not(.inited)").length>0){jQuery(".isotope_wrap .isotope_item_content.square.effect_dir:not(.inited)").each(function(){jQuery(this).addClass("inited").hoverdir()})}if(GRACE_CHURCH_GLOBALS.popup_engine=="pretty"){jQuery("a[href$='jpg'],a[href$='jpeg'],a[href$='png'],a[href$='gif']").attr("rel","prettyPhoto[slideshow]");var a=jQuery("a[rel*='prettyPhoto']:not(.inited):not([data-rel*='pretty']):not([rel*='magnific']):not([data-rel*='magnific'])").addClass("inited");try{a.prettyPhoto({social_tools:"",theme:"facebook",deeplinking:false})}catch(b){}}else{if(GRACE_CHURCH_GLOBALS.popup_engine=="magnific"){jQuery("a[href$='jpg'],a[href$='jpeg'],a[href$='png'],a[href$='gif']").attr("rel","magnific");var a=jQuery("a[rel*='magnific']:not(.inited):not(.prettyphoto):not([rel*='pretty']):not([data-rel*='pretty'])").addClass("inited");try{a.magnificPopup({type:"image",mainClass:"mfp-img-mobile",closeOnContentClick:true,closeBtnInside:true,fixedContentPos:true,midClick:true,preloader:true,tLoading:GRACE_CHURCH_GLOBALS.strings["magnific_loading"],gallery:{enabled:true},image:{tError:GRACE_CHURCH_GLOBALS.strings["magnific_error"],verticalFit:true}})}catch(b){}}}jQuery(".post_item_product .product .images a.woocommerce-main-image:not(.hover_icon)").addClass("hover_icon hover_icon_view");if(jQuery(".post_counters_likes:not(.inited)").length>0){jQuery(".post_counters_likes:not(.inited)").addClass("inited").click(function(i){var g=jQuery(this);var h=g.hasClass("enabled")?1:-1;var d=g.data("postid");var c=Number(g.data("likes"))+h;var f=grace_church_get_cookie("grace_church_likes");if(f===undefined||f===null){f=""}jQuery.post(GRACE_CHURCH_GLOBALS.ajax_url,{action:"post_counter",nonce:GRACE_CHURCH_GLOBALS.ajax_nonce,post_id:d,likes:c}).done(function(e){var j=JSON.parse(e);if(j.error===""){if(h==1){var k=g.data("title-dislike");g.removeClass("enabled").addClass("disabled");f+=(f.substr(-1)!=","?",":"")+d+","}else{var k=g.data("title-like");g.removeClass("disabled").addClass("enabled");f=f.replace(","+d+",",",")}g.data("likes",c).attr("title",k).find(".post_counters_number").html(c);grace_church_set_cookie("grace_church_likes",f,365)}else{grace_church_message_warning(GRACE_CHURCH_GLOBALS.strings["error_like"])}});i.preventDefault();return false})}if(jQuery(".sc_video_play_button:not(.inited)").length>0){jQuery(".sc_video_play_button:not(.inited)").each(function(){jQuery(this).addClass("inited").animate({opacity:1},1000).click(function(i){if(!jQuery(this).hasClass("sc_video_play_button")){return}var g=jQuery(this).removeClass("sc_video_play_button hover_icon_play").data("video");if(g!==""){jQuery(this).empty().html(g);grace_church_video_dimensions();var d=jQuery(this).find("video");var c=d.width();var f=d.height();grace_church_init_media_elements(jQuery(this));jQuery(this).find("video").css({width:c,height:f}).attr({width:c,height:f})}i.preventDefault();return false})})}jQuery("a.tribe-events-read-more,.tribe-events-button,.tribe-events-nav-previous a,.tribe-events-nav-next a,.tribe-events-widget-link a,.tribe-events-viewmore a").addClass("sc_button sc_button_style_filled")}function grace_church_init_media_elements(a){if(GRACE_CHURCH_GLOBALS.media_elements_enabled&&a.find("audio,video").length>0){if(window.mejs){window.mejs.MepDefaults.enableAutosize=false;window.mejs.MediaElementDefaults.enableAutosize=false;a.find("audio:not(.wp-audio-shortcode),video:not(.wp-video-shortcode)").each(function(){if(jQuery(this).parents(".mejs-mediaelement").length==0){var b=jQuery(this);var c={enableAutosize:true,videoWidth:-1,videoHeight:-1,audioWidth:"100%",audioHeight:30,success:function(e){var f,d;if("flash"===e.pluginType){f=e.attributes.autoplay&&"false"!==e.attributes.autoplay;d=e.attributes.loop&&"false"!==e.attributes.loop;f&&e.addEventListener("canplay",function(){e.play()},false);d&&e.addEventListener("ended",function(){e.play()},false)}b.parents(".sc_audio,.sc_video").addClass("inited sc_show")}};jQuery(this).mediaelementplayer(c)}})}else{setTimeout(function(){grace_church_init_media_elements(a)},400)}}}function grace_church_show_system_message(){if(GRACE_CHURCH_GLOBALS.system_message["message"]){if(GRACE_CHURCH_GLOBALS.system_message["status"]=="success"){grace_church_message_success(GRACE_CHURCH_GLOBALS.system_message["message"],GRACE_CHURCH_GLOBALS.system_message["header"])}else{if(GRACE_CHURCH_GLOBALS.system_message["status"]=="info"){grace_church_message_info(GRACE_CHURCH_GLOBALS.system_message["message"],GRACE_CHURCH_GLOBALS.system_message["header"])}else{if(GRACE_CHURCH_GLOBALS.system_message["status"]=="error"||GRACE_CHURCH_GLOBALS.system_message["status"]=="warning"){grace_church_message_warning(GRACE_CHURCH_GLOBALS.system_message["message"],GRACE_CHURCH_GLOBALS.system_message["header"])}}}}}function grace_church_toggle_popup(a){if(a.css("display")!="none"){grace_church_hide_popup(a)}else{grace_church_show_popup(a)}}function grace_church_show_popup(a){if(a.css("display")=="none"){if(GRACE_CHURCH_GLOBALS.css_animation){a.show().removeClass("animated fast "+GRACE_CHURCH_GLOBALS.menu_animation_out).addClass("animated fast "+GRACE_CHURCH_GLOBALS.menu_animation_in)}else{a.slideDown()}}}function grace_church_hide_popup(a){if(a.css("display")!="none"){if(GRACE_CHURCH_GLOBALS.css_animation){a.removeClass("animated fast "+GRACE_CHURCH_GLOBALS.menu_animation_in).addClass("animated fast "+GRACE_CHURCH_GLOBALS.menu_animation_out).delay(500).hide()}else{a.fadeOut()}}}function grace_church_comments_validate(b){b.find("input").removeClass("error_fields_class");var a=grace_church_form_validate(b,{error_message_text:GRACE_CHURCH_GLOBALS.strings["error_global"],error_message_show:true,error_message_time:4000,error_message_class:"sc_infobox sc_infobox_style_error",error_fields_class:"error_fields_class",exit_after_first_error:false,rules:[{field:"author",min_length:{value:1,message:GRACE_CHURCH_GLOBALS.strings["name_empty"]},max_length:{value:60,message:GRACE_CHURCH_GLOBALS.strings["name_long"]}},{field:"email",min_length:{value:7,message:GRACE_CHURCH_GLOBALS.strings["email_empty"]},max_length:{value:60,message:GRACE_CHURCH_GLOBALS.strings["email_long"]},mask:{value:GRACE_CHURCH_GLOBALS.email_mask,message:GRACE_CHURCH_GLOBALS.strings["email_not_valid"]}},{field:"comment",min_length:{value:1,message:GRACE_CHURCH_GLOBALS.strings["text_empty"]},max_length:{value:GRACE_CHURCH_GLOBALS.comments_maxlength,message:GRACE_CHURCH_GLOBALS.strings["text_long"]}}]});return !a}function grace_church_login_validate(b){b.find("input").removeClass("error_fields_class");var a=grace_church_form_validate(b,{error_message_show:true,error_message_time:4000,error_message_class:"sc_infobox sc_infobox_style_error",error_fields_class:"error_fields_class",exit_after_first_error:true,rules:[{field:"log",min_length:{value:1,message:GRACE_CHURCH_GLOBALS.strings["login_empty"]},max_length:{value:60,message:GRACE_CHURCH_GLOBALS.strings["login_long"]}},{field:"pwd",min_length:{value:4,message:GRACE_CHURCH_GLOBALS.strings["password_empty"]},max_length:{value:30,message:GRACE_CHURCH_GLOBALS.strings["password_long"]}}]});if(!a){jQuery.post(GRACE_CHURCH_GLOBALS.ajax_url,{action:"login_user",nonce:GRACE_CHURCH_GLOBALS.ajax_nonce,remember:b.find("#rememberme").val(),user_log:b.find("#log").val(),user_pwd:b.find("#password").val()}).done(function(c){try{var g=JSON.parse(c)}catch(f){dcl(c)}var d=b.find(".result");if(d.length==0){d=b.siblings(".result")}if(d.length==0){d=b.after('<div class="result"></div>').next(".result")}d.toggleClass("sc_infobox_style_error",false).toggleClass("sc_infobox_style_success",false);if(g.error===""){d.addClass("sc_infobox sc_infobox_style_success").html(GRACE_CHURCH_GLOBALS.strings["login_success"]);setTimeout(function(){location.reload()},3000)}else{d.addClass("sc_infobox sc_infobox_style_error").html(GRACE_CHURCH_GLOBALS.strings["login_failed"]+"<br>"+g.error)}d.fadeIn().delay(3000).fadeOut()})}return false}function grace_church_registration_validate(b){b.find("input").removeClass("error_fields_class");var a=grace_church_form_validate(b,{error_message_show:true,error_message_time:4000,error_message_class:"sc_infobox sc_infobox_style_error",error_fields_class:"error_fields_class",exit_after_first_error:true,rules:[{field:"registration_username",min_length:{value:1,message:GRACE_CHURCH_GLOBALS.strings["login_empty"]},max_length:{value:60,message:GRACE_CHURCH_GLOBALS.strings["login_long"]}},{field:"registration_email",min_length:{value:7,message:GRACE_CHURCH_GLOBALS.strings["email_empty"]},max_length:{value:60,message:GRACE_CHURCH_GLOBALS.strings["email_long"]},mask:{value:GRACE_CHURCH_GLOBALS.email_mask,message:GRACE_CHURCH_GLOBALS.strings["email_not_valid"]}},{field:"registration_pwd",min_length:{value:4,message:GRACE_CHURCH_GLOBALS.strings["password_empty"]},max_length:{value:30,message:GRACE_CHURCH_GLOBALS.strings["password_long"]}},{field:"registration_pwd2",equal_to:{value:"registration_pwd",message:GRACE_CHURCH_GLOBALS.strings["password_not_equal"]}}]});if(!a){jQuery.post(GRACE_CHURCH_GLOBALS.ajax_url,{action:"registration_user",nonce:GRACE_CHURCH_GLOBALS.ajax_nonce,user_name:b.find("#registration_username").val(),user_email:b.find("#registration_email").val(),user_pwd:b.find("#registration_pwd").val()}).done(function(c){var e=JSON.parse(c);var d=b.find(".result");if(d.length==0){d=b.siblings(".result")}if(d.length==0){d=b.after('<div class="result"></div>').next(".result")}d.toggleClass("sc_infobox_style_error",false).toggleClass("sc_infobox_style_success",false);if(e.error===""){d.addClass("sc_infobox sc_infobox_style_success").html(GRACE_CHURCH_GLOBALS.strings["registration_success"]);setTimeout(function(){jQuery(".popup_login_link").trigger("click")},3000)}else{d.addClass("sc_infobox sc_infobox_style_error").html(GRACE_CHURCH_GLOBALS.strings["registration_failed"]+" "+e.error)}d.fadeIn().delay(3000).fadeOut()})}return false}function grace_church_contact_form_validate(d){var c=d.attr("action");if(c==""){return false}d.find("input").removeClass("error_fields_class");var b=false;var a=d.data("formtype")=="custom";if(!a){b=grace_church_form_validate(d,{error_message_show:true,error_message_time:4000,error_message_class:"sc_infobox sc_infobox_style_error",error_fields_class:"error_fields_class",exit_after_first_error:false,rules:[{field:"username",min_length:{value:1,message:GRACE_CHURCH_GLOBALS.strings["name_empty"]},max_length:{value:60,message:GRACE_CHURCH_GLOBALS.strings["name_long"]}},{field:"email",min_length:{value:7,message:GRACE_CHURCH_GLOBALS.strings["email_empty"]},max_length:{value:60,message:GRACE_CHURCH_GLOBALS.strings["email_long"]},mask:{value:GRACE_CHURCH_GLOBALS.email_mask,message:GRACE_CHURCH_GLOBALS.strings["email_not_valid"]}},{field:"subject",min_length:{value:1,message:GRACE_CHURCH_GLOBALS.strings["subject_empty"]},max_length:{value:100,message:GRACE_CHURCH_GLOBALS.strings["subject_long"]}},{field:"message",min_length:{value:1,message:GRACE_CHURCH_GLOBALS.strings["text_empty"]},max_length:{value:GRACE_CHURCH_GLOBALS.contacts_maxlength,message:GRACE_CHURCH_GLOBALS.strings["text_long"]}}]})}if(!b&&c!="#"){jQuery.post(c,{action:"send_contact_form",nonce:GRACE_CHURCH_GLOBALS.ajax_nonce,type:a?"custom":"contact",data:d.serialize()}).done(function(f){var g=JSON.parse(f);var e=d.find(".result").toggleClass("sc_infobox_style_error",false).toggleClass("sc_infobox_style_success",false);if(g.error===""){d.get(0).reset();e.addClass("sc_infobox_style_success").html(GRACE_CHURCH_GLOBALS.strings["send_complete"])}else{e.addClass("sc_infobox_style_error").html(GRACE_CHURCH_GLOBALS.strings["send_error"]+" "+g.error)}e.fadeIn().delay(3000).fadeOut()})}return !b};