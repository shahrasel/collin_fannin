jQuery(document).ready(function(){jQuery("#frontend_editor_icon_edit").click(function(a){if(jQuery("#frontend_editor_overflow").length==0){jQuery("body").append('<div id="frontend_editor_overflow" class="frontend_editor_overflow"></div>')}jQuery("#frontend_editor_overflow").fadeIn(400);jQuery("#frontend_editor_button_cancel").val(GRACE_CHURCH_GLOBALS.strings["editor_caption_cancel"]);jQuery("#frontend_editor").slideDown();a.preventDefault();return false});jQuery("#frontend_editor_button_cancel").click(function(a){if(jQuery(this).val()==GRACE_CHURCH_GLOBALS.strings["editor_caption_close"]){window.location.reload()}else{jQuery("#frontend_editor").slideUp();jQuery("#frontend_editor_overflow").fadeOut(400)}a.preventDefault();return false});jQuery("#frontend_editor_button_save").click(function(c){var a=typeof(tinymce)!="undefined"?tinymce.activeEditor:false;if("mce_fullscreen"==a.id){tinymce.get("content").setContent(a.getContent({format:"raw"}),{format:"raw"})}tinymce.triggerSave();var b={action:"frontend_editor_save",nonce:GRACE_CHURCH_GLOBALS.ajax_nonce_editor,data:jQuery("#frontend_editor form").serialize()};jQuery.post(GRACE_CHURCH_GLOBALS.ajax_url,b,function(d){var e=JSON.parse(d);if(e.error==""){grace_church_message_success("",GRACE_CHURCH_GLOBALS.strings["editor_save_success"]);jQuery("#frontend_editor_button_cancel").val(GRACE_CHURCH_GLOBALS.strings["editor_caption_close"])}else{grace_church_message_warning(e.error,GRACE_CHURCH_GLOBALS.strings["editor_save_error"])}});c.preventDefault();return false});jQuery("#frontend_editor_icon_delete").click(function(a){grace_church_message_confirm(GRACE_CHURCH_GLOBALS.strings["editor_delete_post"],GRACE_CHURCH_GLOBALS.strings["editor_delete_post_header"],function(b){if(b!=1){return}var c={action:"frontend_editor_delete",post_id:jQuery("#frontend_editor form #frontend_editor_post_id").val(),nonce:GRACE_CHURCH_GLOBALS.ajax_nonce_editor};jQuery.post(GRACE_CHURCH_GLOBALS.ajax_url,c,function(d){var e=JSON.parse(d);if(e.error==""){grace_church_message_success("",GRACE_CHURCH_GLOBALS.strings["editor_delete_success"]);setTimeout(function(){window.location.href=GRACE_CHURCH_GLOBALS.site_url},1000)}else{grace_church_message_warning(e.error,GRACE_CHURCH_GLOBALS.strings["editor_delete_error"])}})});a.preventDefault();return false})});